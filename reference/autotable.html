<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Tabular experience study summary — autotable • actxps</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tabular experience study summary — autotable"><meta name="description" content="autotable() is a generic function used to create a table
from an object of a particular class. Tables are constructed using the
gt package.
autotable.exp_df() is used to convert experience study results to a
presentation-friendly format.
autotable.trx_df() is used to convert transaction study results to a
presentation-friendly format."><meta property="og:description" content="autotable() is a generic function used to create a table
from an object of a particular class. Tables are constructed using the
gt package.
autotable.exp_df() is used to convert experience study results to a
presentation-friendly format.
autotable.trx_df() is used to convert transaction study results to a
presentation-friendly format."><meta property="og:image" content="https://mattheaphy.github.io/actxps/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">actxps</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.6.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/actxps.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/exposures.html">Exposure calculations</a></li>
    <li><a class="dropdown-item" href="../articles/exp_summary.html">Experience summaries</a></li>
    <li><a class="dropdown-item" href="../articles/transactions.html">Transaction studies</a></li>
    <li><a class="dropdown-item" href="../articles/visualizations.html">Data visualizations</a></li>
    <li><a class="dropdown-item" href="../articles/misc.html">Other functions</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mattheaphy/actxps/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Tabular experience study summary</h1>
      <small class="dont-index">Source: <a href="https://github.com/mattheaphy/actxps/blob/main/R/tables.R" class="external-link"><code>R/tables.R</code></a></small>
      <div class="d-none name"><code>autotable.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>autotable()</code> is a generic function used to create a table
from an object of a particular class. Tables are constructed using the
<code>gt</code> package.</p>
<p><code>autotable.exp_df()</code> is used to convert experience study results to a
presentation-friendly format.</p>
<p><code>autotable.trx_df()</code> is used to convert transaction study results to a
presentation-friendly format.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">autotable</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'exp_df'</span></span>
<span><span class="fu">autotable</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  fontsize <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  decimals <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  colorful <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  color_q_obs <span class="op">=</span> <span class="st">"RColorBrewer::GnBu"</span>,</span>
<span>  color_ae_ <span class="op">=</span> <span class="st">"RColorBrewer::RdBu"</span>,</span>
<span>  rename_cols <span class="op">=</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/list2.html" class="external-link">list2</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span>,</span>
<span>  show_conf_int <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show_cred_adj <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  decimals_amt <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  suffix_amt <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show_total <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'trx_df'</span></span>
<span><span class="fu">autotable</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  fontsize <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  decimals <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  colorful <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  color_util <span class="op">=</span> <span class="st">"RColorBrewer::GnBu"</span>,</span>
<span>  color_pct_of <span class="op">=</span> <span class="st">"RColorBrewer::RdBu"</span>,</span>
<span>  rename_cols <span class="op">=</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/list2.html" class="external-link">list2</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span>,</span>
<span>  show_conf_int <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  decimals_amt <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  suffix_amt <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show_total <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>An object of class <code>exp_df</code> usually created by the
function <code><a href="exp_stats.html">exp_stats()</a></code> or an object of class <code>trx_df</code> created by the
<code><a href="trx_stats.html">trx_stats()</a></code> function.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to <code><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt::gt()</a></code>.</p></dd>


<dt id="arg-fontsize">fontsize<a class="anchor" aria-label="anchor" href="#arg-fontsize"></a></dt>
<dd><p>Font size percentage multiplier.</p></dd>


<dt id="arg-decimals">decimals<a class="anchor" aria-label="anchor" href="#arg-decimals"></a></dt>
<dd><p>Number of decimals to display for percentages</p></dd>


<dt id="arg-colorful">colorful<a class="anchor" aria-label="anchor" href="#arg-colorful"></a></dt>
<dd><p>If <code>TRUE</code>, color will be added to the the observed
termination rate and actual-to-expected columns for termination studies, and
the utilization rate and "percentage of" columns for transaction studies.</p></dd>


<dt id="arg-color-q-obs">color_q_obs<a class="anchor" aria-label="anchor" href="#arg-color-q-obs"></a></dt>
<dd><p>Color palette used for the observed termination rate.</p></dd>


<dt id="arg-color-ae-">color_ae_<a class="anchor" aria-label="anchor" href="#arg-color-ae-"></a></dt>
<dd><p>Color palette used for actual-to-expected rates.</p></dd>


<dt id="arg-rename-cols">rename_cols<a class="anchor" aria-label="anchor" href="#arg-rename-cols"></a></dt>
<dd><p>An optional list consisting of key-value pairs. This
can be used to relabel columns on the output table. This parameter is most
useful for renaming grouping variables that will appear under their original
variable names if left unchanged. See <code><a href="https://gt.rstudio.com/reference/cols_label.html" class="external-link">gt::cols_label()</a></code> for more
information.</p></dd>


<dt id="arg-show-conf-int">show_conf_int<a class="anchor" aria-label="anchor" href="#arg-show-conf-int"></a></dt>
<dd><p>If <code>TRUE</code> confidence intervals will be displayed
assuming they are available on <code>object</code>.</p></dd>


<dt id="arg-show-cred-adj">show_cred_adj<a class="anchor" aria-label="anchor" href="#arg-show-cred-adj"></a></dt>
<dd><p>If <code>TRUE</code> credibility-weighted termination rates will
be displayed assuming they are available on <code>object</code>.</p></dd>


<dt id="arg-decimals-amt">decimals_amt<a class="anchor" aria-label="anchor" href="#arg-decimals-amt"></a></dt>
<dd><p>Number of decimals to display for amount columns (number
of claims, claim amounts, exposures, transaction counts, total transactions,
and average transactions)</p></dd>


<dt id="arg-suffix-amt">suffix_amt<a class="anchor" aria-label="anchor" href="#arg-suffix-amt"></a></dt>
<dd><p>This argument has the same meaning as the <code>suffixing</code>
argument in <code><a href="https://gt.rstudio.com/reference/fmt_number.html" class="external-link">gt::fmt_number()</a></code> for amount columns. If <code>FALSE</code> (the default),
no scaling or suffixing are applied to amount columns. If <code>TRUE</code>, all amount
columns are automatically scaled and suffixed by "K" (thousands), "M"
(millions), "B" (billions), or "T" (trillions). See <code><a href="https://gt.rstudio.com/reference/fmt_number.html" class="external-link">gt::fmt_number()</a></code> for
more information.</p></dd>


<dt id="arg-show-total">show_total<a class="anchor" aria-label="anchor" href="#arg-show-total"></a></dt>
<dd><p>If <code>TRUE</code> the table will include grand total row(s).</p></dd>


<dt id="arg-color-util">color_util<a class="anchor" aria-label="anchor" href="#arg-color-util"></a></dt>
<dd><p>Color palette used for utilization rates.</p></dd>


<dt id="arg-color-pct-of">color_pct_of<a class="anchor" aria-label="anchor" href="#arg-color-pct-of"></a></dt>
<dd><p>Color palette used for "percentage of" columns.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a <code>gt</code> object</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>color_q_obs</code>, <code>color_ae_</code>, <code>color_util</code>, and <code>color_pct_of</code> arguments
must be strings referencing a discrete color palette available in the
<code>paletteer</code> package. Palettes must be in the form "package::palette".
For a full list of available palettes, see <a href="https://rdrr.io/pkg/paletteer/man/palettes_d_names.html" class="external-link">paletteer::palettes_d_names</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">study_py</span> <span class="op">&lt;-</span> <span class="fu"><a href="expose.html">expose_py</a></span><span class="op">(</span><span class="va">census_dat</span>, <span class="st">"2019-12-31"</span>, target_status <span class="op">=</span> <span class="st">"Surrender"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">expected_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.005</span>, <span class="fl">0.03</span>, length.out <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, <span class="fl">0.2</span>, <span class="fl">0.15</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">study_py</span> <span class="op">&lt;-</span> <span class="va">study_py</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>expected_1 <span class="op">=</span> <span class="va">expected_table</span><span class="op">[</span><span class="va">pol_yr</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>           expected_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">inc_guar</span>, <span class="fl">0.015</span>, <span class="fl">0.03</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="add_transactions.html">add_transactions</a></span><span class="op">(</span><span class="va">withdrawals</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">account_vals</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pol_num"</span>, <span class="st">"pol_date_yr"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">exp_res</span> <span class="op">&lt;-</span> <span class="va">study_py</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">pol_yr</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="exp_stats.html">exp_stats</a></span><span class="op">(</span>expected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"expected_1"</span>, <span class="st">"expected_2"</span><span class="op">)</span>, credibility <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>              conf_int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">autotable</span><span class="op">(</span><span class="va">exp_res</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">trx_res</span> <span class="op">&lt;-</span> <span class="va">study_py</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">pol_yr</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="trx_stats.html">trx_stats</a></span><span class="op">(</span>percent_of <span class="op">=</span> <span class="st">"av_anniv"</span>, conf_int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">autotable</span><span class="op">(</span><span class="va">trx_res</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matt Heaphy.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1. Logo <a href="https://www.freepik.com/free-vector/shine-old-wooden-chest-realistic-composition-transparent-background-with-vintage-coffer-sparkling-particles_7497397.htm#query=treasure&amp;position=7&amp;from_view=search&amp;track=sph" class="external-link">image by macrovector</a> on Freepik</p>
</div>

    </footer></div>





  </body></html>

