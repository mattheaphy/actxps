<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='Launch a shiny application to interactively explore drivers of
experience.
dat must be an exposed_df object. An error will be thrown is any other
object type is passed. If dat has transactions attached, the app will
contain features for both termination and transaction studies. Otherwise,
the app will only support termination studies.
If nothing is passed to predictors, all columns names in dat will be
used (excluding the policy number, status, termination date, exposure,
transaction counts, and transaction amounts columns).
The expected argument is optional. As a default, any column names
containing the word "expected" are used.'><title>Interactively explore experience data — exp_shiny • actxps</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Interactively explore experience data — exp_shiny"><meta property="og:description" content='Launch a shiny application to interactively explore drivers of
experience.
dat must be an exposed_df object. An error will be thrown is any other
object type is passed. If dat has transactions attached, the app will
contain features for both termination and transaction studies. Otherwise,
the app will only support termination studies.
If nothing is passed to predictors, all columns names in dat will be
used (excluding the policy number, status, termination date, exposure,
transaction counts, and transaction amounts columns).
The expected argument is optional. As a default, any column names
containing the word "expected" are used.'><meta property="og:image" content="https://mattheaphy.github.io/actxps/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">actxps</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/actxps.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/exposures.html">Exposure calculations</a>
    <a class="dropdown-item" href="../articles/exp_summary.html">Experience summaries</a>
    <a class="dropdown-item" href="../articles/transactions.html">Transaction studies</a>
    <a class="dropdown-item" href="../articles/misc.html">Other functions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mattheaphy/actxps/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Interactively explore experience data</h1>
      <small class="dont-index">Source: <a href="https://github.com/mattheaphy/actxps/blob/HEAD/R/exp_shiny.R" class="external-link"><code>R/exp_shiny.R</code></a></small>
      <div class="d-none name"><code>exp_shiny.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Launch a shiny application to interactively explore drivers of
experience.</p>
<p><code>dat</code> must be an <code>exposed_df</code> object. An error will be thrown is any other
object type is passed. If <code>dat</code> has transactions attached, the app will
contain features for both termination and transaction studies. Otherwise,
the app will only support termination studies.</p>
<p>If nothing is passed to <code>predictors</code>, all columns names in <code>dat</code> will be
used (excluding the policy number, status, termination date, exposure,
transaction counts, and transaction amounts columns).</p>
<p>The <code>expected</code> argument is optional. As a default, any column names
containing the word "expected" are used.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">exp_shiny</span><span class="op">(</span></span>
<span>  <span class="va">dat</span>,</span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span>,</span>
<span>  expected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"expected"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">)</span><span class="op">]</span>,</span>
<span>  distinct_max <span class="op">=</span> <span class="fl">25L</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dat</dt>
<dd><p>An <code>exposed_df</code> object.</p></dd>


<dt>predictors</dt>
<dd><p>A character vector of independent variables in <code>dat</code> to
include in the shiny app.</p></dd>


<dt>expected</dt>
<dd><p>A character vector of expected values in <code>dat</code> to include
in the shiny app.</p></dd>


<dt>distinct_max</dt>
<dd><p>Maximum number of distinct values allowed for <code>predictors</code>
to be included as "Color" and "Facets" grouping variables. This input
prevents the drawing of overly complex plots. Default value = 25.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>No return value. This function is called for the side effect of
launching a shiny application.</p>
    </div>
    <div class="section level2">
    <h2 id="layout">Layout<a class="anchor" aria-label="anchor" href="#layout"></a></h2>
    
<div class="section">
<h3 id="filters">Filters<a class="anchor" aria-label="anchor" href="#filters"></a></h3>


<p>The sidebar contains filtering widgets for all variables passed
to the <code>predictors</code> argument.</p>
</div>

<div class="section">
<h3 id="study-options">Study options<a class="anchor" aria-label="anchor" href="#study-options"></a></h3>

<div class="section">
<h4 id="grouping-variables">Grouping variables<a class="anchor" aria-label="anchor" href="#grouping-variables"></a></h4>


<p>This box includes widgets to select grouping variables for summarizing
experience. The "x" widget is also used as the x variable in the plot output.
Similarly, the "Color" and "Facets" widgets are used for color and facets in
the plot. Multiple faceting variables are allowed. For the table output,
"x", "Color", and "Facets" have no particular meaning beyond the order in
which of grouping variables are displayed.</p>
</div>

<div class="section">
<h4 id="study-type">Study type<a class="anchor" aria-label="anchor" href="#study-type"></a></h4>


<p>This box also includes a toggle to switch between termination studies and
transaction studies (if available).</p><div class="section">
<h5 id="termination-studies">Termination studies<a class="anchor" aria-label="anchor" href="#termination-studies"></a></h5>


<p>The expected values checkboxes are used to activate and deactivate expected
values passed to the <code>expected</code> argument. This impacts the table output
directly and the available "y" variables for the plot. If there are no
expected values available, this widget will not appear. The "Weight by"
widget is used to specify which column, if any, contains weights for
summarizing experience.</p>
</div>

<div class="section">
<h5 id="transaction-studies">Transaction studies<a class="anchor" aria-label="anchor" href="#transaction-studies"></a></h5>


<p>The transaction types checkboxes are used to activate and deactivate
transaction types that appear in the plot and table outputs. The available
transaction types are taken from the <code>trx_types</code> attribute of <code>dat</code>.
In the plot output, transaction type will always appear as a faceting
variable. The "Transactions as % of" selector will expand the list of
available "y" variables for the plot and impact the table output directly.
Lastly, a checkbox exists that allows for all transaction types to be
aggregated into a single group.</p>
</div>


</div>


</div>

<div class="section">
<h3 id="output">Output<a class="anchor" aria-label="anchor" href="#output"></a></h3>

<div class="section">
<h4 id="plot-tab">Plot Tab<a class="anchor" aria-label="anchor" href="#plot-tab"></a></h4>


<p>This tab includes a plot and various options for customization:</p><ul><li><p>y: y variable</p></li>
<li><p>Geometry: plotting geometry</p></li>
<li><p>Add Smoothing?: activate to plot loess curves</p></li>
<li><p>Free y Scales: activate to enable separate y scales in each plot.</p></li>
</ul></div>

<div class="section">
<h4 id="table">Table<a class="anchor" aria-label="anchor" href="#table"></a></h4>


<p>This tab includes a data table.</p>
</div>

<div class="section">
<h4 id="export-data">Export Data<a class="anchor" aria-label="anchor" href="#export-data"></a></h4>


<p>This tab includes a download button that will save a copy of the summarized
experience data.</p>
</div>


</div>

<div class="section">
<h3 id="filter-information">Filter Information<a class="anchor" aria-label="anchor" href="#filter-information"></a></h3>


<p>This box contains information on the original number of exposure records,
the number of records after filters are applied, and the percentage of
records retained.</p>
</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">study_py</span> <span class="op">&lt;-</span> <span class="fu"><a href="expose.html">expose_py</a></span><span class="op">(</span><span class="va">census_dat</span>, <span class="st">"2019-12-31"</span>, target_status <span class="op">=</span> <span class="st">"Surrender"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">expected_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.005</span>, <span class="fl">0.03</span>, length.out <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, <span class="fl">0.2</span>, <span class="fl">0.15</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">study_py</span> <span class="op">&lt;-</span> <span class="va">study_py</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>expected_1 <span class="op">=</span> <span class="va">expected_table</span><span class="op">[</span><span class="va">pol_yr</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                expected_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">inc_guar</span>, <span class="fl">0.015</span>, <span class="fl">0.03</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="add_transactions.html">add_transactions</a></span><span class="op">(</span><span class="va">withdrawals</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">account_vals</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pol_num"</span>, <span class="st">"pol_date_yr"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">exp_shiny</span><span class="op">(</span><span class="va">study_py</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Matt Heaphy.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7. Logo <a href="https://www.freepik.com/free-vector/shine-old-wooden-chest-realistic-composition-transparent-background-with-vintage-coffer-sparkling-particles_7497397.htm#query=treasure&amp;position=7&amp;from_view=search&amp;track=sph" class="external-link">image by macrovector</a> on Freepik</p>
</div>

    </footer></div>

  

  

  </body></html>

