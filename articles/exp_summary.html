<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="actxps">
<title>Experience summaries • actxps</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Experience summaries">
<meta property="og:description" content="actxps">
<meta property="og:image" content="https://mattheaphy.github.io/actxps/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">actxps</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/actxps.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/exposures.html">Exposure calculations</a>
    <a class="dropdown-item" href="../articles/exp_summary.html">Experience summaries</a>
    <a class="dropdown-item" href="../articles/transactions.html">Transaction studies</a>
    <a class="dropdown-item" href="../articles/misc.html">Other functions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mattheaphy/actxps/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Experience summaries</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mattheaphy/actxps/blob/HEAD/vignettes/exp_summary.Rmd" class="external-link"><code>vignettes/exp_summary.Rmd</code></a></small>
      <div class="d-none name"><code>exp_summary.Rmd</code></div>
    </div>

    
    
<p>After experience data has been prepared for analysis, the next step
is to summarize results. The actxps package’s workhorse function for
summarizing termination experience is <code><a href="../reference/exp_stats.html">exp_stats()</a></code>. This
function returns an <code>exp_df</code> object, which is a type of data
frame containing additional attributes about the experience study.</p>
<p>At a minimum, an <code>exp_df</code> includes:</p>
<ul>
<li>The number of claims (termination events,
<code>n_claims</code>)</li>
<li>The amount of claims (weighted by a variable of the user’s choice;
more on this below, <code>claims</code>)</li>
<li>The total exposure (<code>exposure</code>)</li>
<li>The observed termination rate (<code>q_obs</code>)</li>
</ul>
<p>Optionally, an <code>exp_df</code> can also include:</p>
<ul>
<li>Any grouping variables attached to the input data</li>
<li>Expected termination rates and actual-to-expected (A/E) ratios
(<code>ae_*</code>)</li>
<li>Limited fluctuation credibility estimates (<code>credibility</code>)
and credibility-adjusted expected termination rates
(<code>adj_*</code>)</li>
</ul>
<p>To demonstrate this function, we’re going to use a data frame
containing simulated census data for a theoretical deferred annuity
product that has an optional guaranteed income rider. Before
<code><a href="../reference/exp_stats.html">exp_stats()</a></code> can be used, we must convert our census data
into exposure records using the <code><a href="../reference/expose.html">expose()</a></code> function<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;See &lt;code&gt;&lt;a href=&quot;../articles/exposures.html&quot;&gt;vignette('exposures')&lt;/a&gt;&lt;/code&gt; for more
information on creating exposure records.&lt;/p&gt;"><sup>1</sup></a>. In
addition, let’s assume we’re interested in studying surrender rates, so
we’ll pass the argument <code>target_status = 'Surrender'</code> to
<code><a href="../reference/expose.html">expose()</a></code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mattheaphy/actxps/" class="external-link">actxps</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">exposed_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/expose.html">expose</a></span><span class="op">(</span><span class="va">census_dat</span>, end_date <span class="op">=</span> <span class="st">"2019-12-31"</span>,</span>
<span>                       target_status <span class="op">=</span> <span class="st">"Surrender"</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="the-exp_stats-function">The <code>exp_stats()</code> function<a class="anchor" aria-label="anchor" href="#the-exp_stats-function"></a>
</h2>
<p>To use <code><a href="../reference/exp_stats.html">exp_stats()</a></code>, pass it a data frame of
exposure-level records, ideally of type <code>exposed_df</code> (the
object class returned by the <code><a href="../reference/expose.html">expose()</a></code> family of
functions).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/exp_stats.html">exp_stats</a></span><span class="op">(</span><span class="va">exposed_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups:  </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   n_claims claims exposure  q_obs</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     <span style="text-decoration: underline;">2</span>869   <span style="text-decoration: underline;">2</span>869  <span style="text-decoration: underline;">132</span>634. 0.021<span style="text-decoration: underline;">6</span></span></span></code></pre></div>
<p>The results show us that we specified no groups, which is why the
output data is a single row. In addition, we can see that we’re looking
at surrender rates through the end of 2019, which
<code><a href="../reference/exp_stats.html">exp_stats()</a></code> inferred from <code>exposed_data</code>.</p>
<p>The number of claims (<code>n_claims</code>) is equal to the number
of “Surrender” statuses in <code>exposed_data</code>. Since we didn’t
specify any weighting variable, the amount of claims
(<code>claims</code>) equals the number of claims.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">amount</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">exposed_data</span><span class="op">$</span><span class="va">status</span> <span class="op">==</span> <span class="st">"Surrender"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2869</span></span></code></pre></div>
<p>The total exposure (<code>exposure</code>) is equal to the sum of the
exposures in <code>exposed_data</code>. Had we specified a weighting
variable, this would be equal to the sum of weighted exposures.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">sum_expo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">exposed_data</span><span class="op">$</span><span class="va">exposure</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 132634</span></span></code></pre></div>
<p>Lastly, the observed termination rate (<code>q_obs</code>) equals the
amount of claims divided by the exposures.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">amount</span> <span class="op">/</span> <span class="va">sum_expo</span></span>
<span><span class="co">#&gt; [1] 0.02163096</span></span></code></pre></div>
<div class="section level3">
<h3 id="grouped-data">Grouped data<a class="anchor" aria-label="anchor" href="#grouped-data"></a>
</h3>
<p>If the data frame passed into <code><a href="../reference/exp_stats.html">exp_stats()</a></code> is grouped
using <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by()</a></code>, the resulting output will contain
one record for each unique group.</p>
<p>In the following, <code>exposed_data</code> is grouped by policy year
before being passed to <code><a href="../reference/exp_stats.html">exp_stats()</a></code>. This results in one row
per policy year found in the data.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">exposed_data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">pol_yr</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/exp_stats.html">exp_stats</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups: pol_yr </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 5</span></span></span>
<span><span class="co">#&gt;    pol_yr n_claims claims exposure   q_obs</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      1      102    102   <span style="text-decoration: underline;">19</span>252. 0.005<span style="text-decoration: underline;">30</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      2      160    160   <span style="text-decoration: underline;">17</span>715. 0.009<span style="text-decoration: underline;">03</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      3      124    124   <span style="text-decoration: underline;">16</span>097. 0.007<span style="text-decoration: underline;">70</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      4      168    168   <span style="text-decoration: underline;">14</span>536. 0.011<span style="text-decoration: underline;">6</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      5      164    164   <span style="text-decoration: underline;">12</span>916. 0.012<span style="text-decoration: underline;">7</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      6      152    152   <span style="text-decoration: underline;">11</span>376. 0.013<span style="text-decoration: underline;">4</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      7      164    164    <span style="text-decoration: underline;">9</span>917. 0.016<span style="text-decoration: underline;">5</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      8      190    190    <span style="text-decoration: underline;">8</span>448. 0.022<span style="text-decoration: underline;">5</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      9      181    181    <span style="text-decoration: underline;">6</span>960. 0.026<span style="text-decoration: underline;">0</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     10      152    152    <span style="text-decoration: underline;">5</span>604. 0.027<span style="text-decoration: underline;">1</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>     11      804    804    <span style="text-decoration: underline;">4</span>390. 0.183  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>     12      330    330    <span style="text-decoration: underline;">2</span>663. 0.124  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>     13       99     99    <span style="text-decoration: underline;">1</span>620. 0.061<span style="text-decoration: underline;">1</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span>     14       62     62     872. 0.071<span style="text-decoration: underline;">1</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span>     15       17     17     268. 0.063<span style="text-decoration: underline;">4</span></span></span></code></pre></div>
<p>Multiple grouping variables are allowed. Below, the presence of an
income guarantee (<code>inc_guar</code>) is added as a second grouping
variable.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">exposed_data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">inc_guar</span>, <span class="va">pol_yr</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/exp_stats.html">exp_stats</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups: inc_guar, pol_yr </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 30 × 6</span></span></span>
<span><span class="co">#&gt;    inc_guar pol_yr n_claims claims exposure   q_obs</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> FALSE         1       56     56    <span style="text-decoration: underline;">7</span>720. 0.007<span style="text-decoration: underline;">25</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> FALSE         2       92     92    <span style="text-decoration: underline;">7</span>103. 0.013<span style="text-decoration: underline;">0</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> FALSE         3       67     67    <span style="text-decoration: underline;">6</span>447. 0.010<span style="text-decoration: underline;">4</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FALSE         4      123    123    <span style="text-decoration: underline;">5</span>799. 0.021<span style="text-decoration: underline;">2</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> FALSE         5       97     97    <span style="text-decoration: underline;">5</span>106. 0.019<span style="text-decoration: underline;">0</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> FALSE         6       96     96    <span style="text-decoration: underline;">4</span>494. 0.021<span style="text-decoration: underline;">4</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> FALSE         7       92     92    <span style="text-decoration: underline;">3</span>899. 0.023<span style="text-decoration: underline;">6</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> FALSE         8      103    103    <span style="text-decoration: underline;">3</span>287. 0.031<span style="text-decoration: underline;">3</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> FALSE         9       87     87    <span style="text-decoration: underline;">2</span>684. 0.032<span style="text-decoration: underline;">4</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> FALSE        10       60     60    <span style="text-decoration: underline;">2</span>156. 0.027<span style="text-decoration: underline;">8</span> </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 20 more rows</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="target-status">Target status<a class="anchor" aria-label="anchor" href="#target-status"></a>
</h3>
<p>The <code>target_status</code> argument of <code><a href="../reference/exp_stats.html">exp_stats()</a></code>
specifies which status levels count as claims in the experience study
summary. If the data passed to <code><a href="../reference/exp_stats.html">exp_stats()</a></code> is an
<code>exposed_df</code> object that already has a specified target
status (via a prior call to <code><a href="../reference/expose.html">expose()</a></code>), then this argument
is not necessary because the target status is automatically
inferred.</p>
<p>Even if the target status exists on the input data, it can be
overridden. However care should be taken to ensure that exposure values
in the data are appropriate for the new status.</p>
<p>Using the example data, a total termination rate can be estimated by
including both death and surrender statuses in
<code>target_status</code>. To ensure exposures are accurate, an
adjustment is made to fully expose deaths prior to calling
<code><a href="../reference/exp_stats.html">exp_stats()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;This adjustment is not necessary on surrenders because
the &lt;code&gt;&lt;a href="../reference/expose.html"&gt;expose()&lt;/a&gt;&lt;/code&gt; function previously did this for us.&lt;/p&gt;'><sup>2</sup></a>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">exposed_data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>exposure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">status</span> <span class="op">==</span> <span class="st">"Death"</span>, <span class="fl">1</span>, <span class="va">status</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">pol_yr</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/exp_stats.html">exp_stats</a></span><span class="op">(</span>target_status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Surrender"</span>, <span class="st">"Death"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups: pol_yr </span></span>
<span><span class="co">#&gt;  Target status: Surrender, Death </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 5</span></span></span>
<span><span class="co">#&gt;    pol_yr n_claims claims exposure  q_obs</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      1      290    290    <span style="text-decoration: underline;">20</span>199 0.014<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      2      325    325    <span style="text-decoration: underline;">18</span>754 0.017<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      3      292    292    <span style="text-decoration: underline;">17</span>054 0.017<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      4      329    329    <span style="text-decoration: underline;">15</span>602 0.021<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      5      329    329    <span style="text-decoration: underline;">13</span>946 0.023<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      6      334    334    <span style="text-decoration: underline;">12</span>371 0.027<span style="text-decoration: underline;">0</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      7      297    297    <span style="text-decoration: underline;">10</span>869 0.027<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      8      340    340     <span style="text-decoration: underline;">9</span>510 0.035<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      9      308    308     <span style="text-decoration: underline;">7</span>953 0.038<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     10      260    260     <span style="text-decoration: underline;">6</span>489 0.040<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>     11      894    894     <span style="text-decoration: underline;">6</span>505 0.137 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>     12      398    398     <span style="text-decoration: underline;">3</span>753 0.106 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>     13      131    131     <span style="text-decoration: underline;">2</span>135 0.061<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span>     14       89     89     <span style="text-decoration: underline;">1</span>306 0.068<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span>     15       23     23      544 0.042<span style="text-decoration: underline;">3</span></span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="weighted-results">Weighted results<a class="anchor" aria-label="anchor" href="#weighted-results"></a>
</h2>
<p>Experience studies often weight output by key policy values. Examples
include account values, cash values, face amount, premiums, and more.
Weighting can be accomplished by passing the name of a weighting column
to the <code>wt</code> argument of <code><a href="../reference/exp_stats.html">exp_stats()</a></code>.</p>
<p>Our sample data contains a column called <code>premium</code> that we
can weight by. When weights are supplied, the <code>claims</code>,
<code>exposure</code>, and <code>q_obs</code> columns will be weighted.
If expected termination rates are supplied (see below), these rates and
A/E values will also be weighted.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;When weights are supplied, additional columns are
created containing the sum of weights, the sum of squared weights, and
the number of records. These columns are used for re-summarizing the
data (see the “Summary method” section on this page).&lt;/p&gt;"><sup>3</sup></a></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">exposed_data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">pol_yr</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/exp_stats.html">exp_stats</a></span><span class="op">(</span>wt <span class="op">=</span> <span class="st">'premium'</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups: pol_yr </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt;  Weighted by: premium </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 8</span></span></span>
<span><span class="co">#&gt;    pol_yr n_claims claims  exposure   q_obs  .weight  .weight_sq .weight_n</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      1      102  <span style="text-decoration: underline;">83</span>223 25<span style="text-decoration: underline;">312</span>813. 0.003<span style="text-decoration: underline;">29</span> 26<span style="text-decoration: underline;">301</span>746 <span style="text-decoration: underline;">60</span>742<span style="text-decoration: underline;">993</span>234     <span style="text-decoration: underline;">19</span>995</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      2      160 <span style="text-decoration: underline;">170</span>058 23<span style="text-decoration: underline;">352</span>482. 0.007<span style="text-decoration: underline;">28</span> 24<span style="text-decoration: underline;">275</span>265 <span style="text-decoration: underline;">56</span>232<span style="text-decoration: underline;">848</span>027     <span style="text-decoration: underline;">18</span>434</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      3      124 <span style="text-decoration: underline;">123</span>554 21<span style="text-decoration: underline;">246</span>774. 0.005<span style="text-decoration: underline;">82</span> 22<span style="text-decoration: underline;">201</span>817 <span style="text-decoration: underline;">51</span>746<span style="text-decoration: underline;">834</span>383     <span style="text-decoration: underline;">16</span>806</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      4      168 <span style="text-decoration: underline;">176</span>751 19<span style="text-decoration: underline;">270</span>854. 0.009<span style="text-decoration: underline;">17</span> 20<span style="text-decoration: underline;">200</span>019 <span style="text-decoration: underline;">47</span>142<span style="text-decoration: underline;">441</span>689     <span style="text-decoration: underline;">15</span>266</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      5      164 <span style="text-decoration: underline;">173</span>273 17<span style="text-decoration: underline;">228</span>981. 0.010<span style="text-decoration: underline;">1</span>  18<span style="text-decoration: underline;">134</span>795 <span style="text-decoration: underline;">42</span>887<span style="text-decoration: underline;">920</span>479     <span style="text-decoration: underline;">13</span>618</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      6      152 <span style="text-decoration: underline;">163</span>034 15<span style="text-decoration: underline;">246</span>521. 0.010<span style="text-decoration: underline;">7</span>  16<span style="text-decoration: underline;">192</span>950 <span style="text-decoration: underline;">38</span>828<span style="text-decoration: underline;">949</span>428     <span style="text-decoration: underline;">12</span>067</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      7      164 <span style="text-decoration: underline;">153</span>238 13<span style="text-decoration: underline;">328</span>780. 0.011<span style="text-decoration: underline;">5</span>  14<span style="text-decoration: underline;">159</span>437 <span style="text-decoration: underline;">34</span>291<span style="text-decoration: underline;">451</span>913     <span style="text-decoration: underline;">10</span>541</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      8      190 <span style="text-decoration: underline;">174</span>200 11<span style="text-decoration: underline;">476</span>432. 0.015<span style="text-decoration: underline;">2</span>  12<span style="text-decoration: underline;">346</span>124 <span style="text-decoration: underline;">30</span>121<span style="text-decoration: underline;">310</span>640      <span style="text-decoration: underline;">9</span>130</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      9      181 <span style="text-decoration: underline;">187</span>337  9<span style="text-decoration: underline;">546</span>258. 0.019<span style="text-decoration: underline;">6</span>  10<span style="text-decoration: underline;">420</span>172 <span style="text-decoration: underline;">25</span>781<span style="text-decoration: underline;">142</span>118      <span style="text-decoration: underline;">7</span>591</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     10      152 <span style="text-decoration: underline;">157</span>603  7<span style="text-decoration: underline;">707</span>064. 0.020<span style="text-decoration: underline;">4</span>   8<span style="text-decoration: underline;">543</span>150 <span style="text-decoration: underline;">20</span>882<span style="text-decoration: underline;">643</span>976      <span style="text-decoration: underline;">6</span>185</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>     11      804 <span style="text-decoration: underline;">856</span>379  6<span style="text-decoration: underline;">093</span>183. 0.141    6<span style="text-decoration: underline;">783</span>273 <span style="text-decoration: underline;">16</span>219<span style="text-decoration: underline;">955</span>859      <span style="text-decoration: underline;">4</span>897</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>     12      330 <span style="text-decoration: underline;">383</span>055  3<span style="text-decoration: underline;">883</span>534. 0.098<span style="text-decoration: underline;">6</span>   4<span style="text-decoration: underline;">525</span>027 <span style="text-decoration: underline;">11</span>191<span style="text-decoration: underline;">462</span>577      <span style="text-decoration: underline;">3</span>093</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>     13       99 <span style="text-decoration: underline;">123</span>357  2<span style="text-decoration: underline;">450</span>266. 0.050<span style="text-decoration: underline;">3</span>   2<span style="text-decoration: underline;">891</span>573  <span style="text-decoration: underline;">7</span>075<span style="text-decoration: underline;">934</span>189      <span style="text-decoration: underline;">1</span>937</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span>     14       62  <span style="text-decoration: underline;">75</span>534  1<span style="text-decoration: underline;">339</span>240. 0.056<span style="text-decoration: underline;">4</span>   1<span style="text-decoration: underline;">821</span>026  <span style="text-decoration: underline;">4</span>655<span style="text-decoration: underline;">661</span>820      <span style="text-decoration: underline;">1</span>182</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span>     15       17  <span style="text-decoration: underline;">19</span>168   <span style="text-decoration: underline;">401</span>173. 0.047<span style="text-decoration: underline;">8</span>    <span style="text-decoration: underline;">783</span>146  <span style="text-decoration: underline;">1</span>944<span style="text-decoration: underline;">755</span>748       510</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="expected-values-and-ae-ratios">Expected values and A/E ratios<a class="anchor" aria-label="anchor" href="#expected-values-and-ae-ratios"></a>
</h2>
<p>As common metric in experience studies is the actual-to-expected, or
A/E ratio.</p>
<p><span class="math display">\[
A/E\ ratio = \frac{observed\ value}{expected\ value}
\]</span></p>
<p>If the data passed to <code><a href="../reference/exp_stats.html">exp_stats()</a></code> has one or more
columns containing expected termination rates, A/E ratios can be
calculated by passing the names of these columns to the
<code>expected</code> argument.</p>
<p>Let’s assume we have two sets of expected rates. The first set is a
vector that varies by policy year. The second set is either 1.5% or 3.0%
depending on whether the policy has a guaranteed income benefit. First,
we need to attach these assumptions to our exposure data. We will use
the names <code>expected_1</code> and <code>expected_2</code>. Then we
pass these names to the <code>expected</code> argument when we call
<code><a href="../reference/exp_stats.html">exp_stats()</a></code>.</p>
<p>In the output, 4 new columns are created for expected rates and A/E
ratios.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">expected_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.005</span>, <span class="fl">0.03</span>, length.out <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, <span class="fl">0.2</span>, <span class="fl">0.15</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># using 2 different expected termination assumption sets</span></span>
<span><span class="va">exposed_data2</span> <span class="op">&lt;-</span> <span class="va">exposed_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>expected_1 <span class="op">=</span> <span class="va">expected_table</span><span class="op">[</span><span class="va">pol_yr</span><span class="op">]</span>,</span>
<span>         expected_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">exposed_data</span><span class="op">$</span><span class="va">inc_guar</span>, <span class="fl">0.015</span>, <span class="fl">0.03</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">exp_res</span> <span class="op">&lt;-</span> <span class="va">exposed_data2</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">pol_yr</span>, <span class="va">inc_guar</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/exp_stats.html">exp_stats</a></span><span class="op">(</span>expected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"expected_1"</span>, <span class="st">"expected_2"</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span></span>
<span><span class="va">exp_res</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">pol_yr</span>, <span class="va">inc_guar</span>, <span class="va">q_obs</span>, <span class="va">expected_1</span>, <span class="va">expected_2</span>, </span>
<span>         <span class="va">ae_expected_1</span>, <span class="va">ae_expected_2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups: pol_yr, inc_guar </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt;  Expected values: expected_1, expected_2 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 30 × 7</span></span></span>
<span><span class="co">#&gt;    pol_yr inc_guar   q_obs expected_1 expected_2 ae_expected_1 ae_expected_2</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      1 FALSE    0.007<span style="text-decoration: underline;">25</span>    0.005        0.03          1.45          0.242</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      1 TRUE     0.003<span style="text-decoration: underline;">99</span>    0.005        0.015         0.798         0.266</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      2 FALSE    0.013<span style="text-decoration: underline;">0</span>     0.007<span style="text-decoration: underline;">78</span>      0.03          1.67          0.432</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      2 TRUE     0.006<span style="text-decoration: underline;">41</span>    0.007<span style="text-decoration: underline;">78</span>      0.015         0.824         0.427</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      3 FALSE    0.010<span style="text-decoration: underline;">4</span>     0.010<span style="text-decoration: underline;">6</span>       0.03          0.985         0.346</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      3 TRUE     0.005<span style="text-decoration: underline;">91</span>    0.010<span style="text-decoration: underline;">6</span>       0.015         0.560         0.394</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      4 FALSE    0.021<span style="text-decoration: underline;">2</span>     0.013<span style="text-decoration: underline;">3</span>       0.03          1.59          0.707</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      4 TRUE     0.005<span style="text-decoration: underline;">15</span>    0.013<span style="text-decoration: underline;">3</span>       0.015         0.386         0.343</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      5 FALSE    0.019<span style="text-decoration: underline;">0</span>     0.016<span style="text-decoration: underline;">1</span>       0.03          1.18          0.633</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      5 TRUE     0.008<span style="text-decoration: underline;">58</span>    0.016<span style="text-decoration: underline;">1</span>       0.015         0.532         0.572</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 20 more rows</span></span></span></code></pre></div>
<p>As noted above, if weights are passed to <code><a href="../reference/exp_stats.html">exp_stats()</a></code>
then A/E ratios will also be weighted.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">exposed_data2</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">pol_yr</span>, <span class="va">inc_guar</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/exp_stats.html">exp_stats</a></span><span class="op">(</span>expected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"expected_1"</span>, <span class="st">"expected_2"</span><span class="op">)</span>, </span>
<span>            wt <span class="op">=</span> <span class="st">"premium"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">pol_yr</span>, <span class="va">inc_guar</span>, <span class="va">q_obs</span>, <span class="va">expected_1</span>, <span class="va">expected_2</span>, </span>
<span>         <span class="va">ae_expected_1</span>, <span class="va">ae_expected_2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups: pol_yr, inc_guar </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt;  Expected values: expected_1, expected_2 </span></span>
<span><span class="co">#&gt;  Weighted by: premium </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 30 × 7</span></span></span>
<span><span class="co">#&gt;    pol_yr inc_guar   q_obs expected_1 expected_2 ae_expected_1 ae_expected_2</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      1 FALSE    0.004<span style="text-decoration: underline;">71</span>    0.005        0.03          0.942         0.157</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      1 TRUE     0.002<span style="text-decoration: underline;">35</span>    0.005        0.015         0.470         0.157</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      2 FALSE    0.010<span style="text-decoration: underline;">5</span>     0.007<span style="text-decoration: underline;">78</span>      0.03          1.36          0.351</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      2 TRUE     0.005<span style="text-decoration: underline;">13</span>    0.007<span style="text-decoration: underline;">78</span>      0.015         0.660         0.342</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      3 FALSE    0.007<span style="text-decoration: underline;">37</span>    0.010<span style="text-decoration: underline;">6</span>       0.03          0.698         0.246</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      3 TRUE     0.004<span style="text-decoration: underline;">79</span>    0.010<span style="text-decoration: underline;">6</span>       0.015         0.453         0.319</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      4 FALSE    0.017<span style="text-decoration: underline;">4</span>     0.013<span style="text-decoration: underline;">3</span>       0.03          1.30          0.579</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      4 TRUE     0.003<span style="text-decoration: underline;">77</span>    0.013<span style="text-decoration: underline;">3</span>       0.015         0.283         0.252</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      5 FALSE    0.014<span style="text-decoration: underline;">6</span>     0.016<span style="text-decoration: underline;">1</span>       0.03          0.907         0.487</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      5 TRUE     0.007<span style="text-decoration: underline;">10</span>    0.016<span style="text-decoration: underline;">1</span>       0.015         0.441         0.473</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 20 more rows</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="credibility">Credibility<a class="anchor" aria-label="anchor" href="#credibility"></a>
</h2>
<p>If the <code>credibility</code> argument is set to <code>TRUE</code>,
<code><a href="../reference/exp_stats.html">exp_stats()</a></code> will produce an estimate of partial credibility
under the Limited Fluctuation credibility method (also known as
Classical Credibility) assuming a binomial distribution of claims.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;See Herzog, Thomas (1999). Introduction to Credibility
Theory for more information on Limited Fluctuation Credibility.&lt;/p&gt;"><sup>4</sup></a></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exposed_data2</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">pol_yr</span>, <span class="va">inc_guar</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/exp_stats.html">exp_stats</a></span><span class="op">(</span>credibility <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">pol_yr</span>, <span class="va">inc_guar</span>, <span class="va">claims</span>, <span class="va">q_obs</span>, <span class="va">credibility</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups: pol_yr, inc_guar </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 30 × 5</span></span></span>
<span><span class="co">#&gt;    pol_yr inc_guar claims   q_obs credibility</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      1 FALSE        56 0.007<span style="text-decoration: underline;">25</span>       0.192</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      1 TRUE         46 0.003<span style="text-decoration: underline;">99</span>       0.173</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      2 FALSE        92 0.013<span style="text-decoration: underline;">0</span>        0.246</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      2 TRUE         68 0.006<span style="text-decoration: underline;">41</span>       0.211</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      3 FALSE        67 0.010<span style="text-decoration: underline;">4</span>        0.210</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      3 TRUE         57 0.005<span style="text-decoration: underline;">91</span>       0.193</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      4 FALSE       123 0.021<span style="text-decoration: underline;">2</span>        0.286</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      4 TRUE         45 0.005<span style="text-decoration: underline;">15</span>       0.172</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      5 FALSE        97 0.019<span style="text-decoration: underline;">0</span>        0.254</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      5 TRUE         67 0.008<span style="text-decoration: underline;">58</span>       0.210</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 20 more rows</span></span></span></code></pre></div>
<p>Under the default arguments, credibility calculations assume a 95%
confidence of being within 5% of the true value. These parameters can be
overridden using the <code>cred_p</code> and <code>cred_r</code>
arguments, respectively.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exposed_data2</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">pol_yr</span>, <span class="va">inc_guar</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/exp_stats.html">exp_stats</a></span><span class="op">(</span>credibility <span class="op">=</span> <span class="cn">TRUE</span>, cred_p <span class="op">=</span> <span class="fl">0.98</span>, cred_r <span class="op">=</span> <span class="fl">0.03</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">pol_yr</span>, <span class="va">inc_guar</span>, <span class="va">claims</span>, <span class="va">q_obs</span>, <span class="va">credibility</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups: pol_yr, inc_guar </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 30 × 5</span></span></span>
<span><span class="co">#&gt;    pol_yr inc_guar claims   q_obs credibility</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      1 FALSE        56 0.007<span style="text-decoration: underline;">25</span>      0.096<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      1 TRUE         46 0.003<span style="text-decoration: underline;">99</span>      0.087<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      2 FALSE        92 0.013<span style="text-decoration: underline;">0</span>       0.125 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      2 TRUE         68 0.006<span style="text-decoration: underline;">41</span>      0.107 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      3 FALSE        67 0.010<span style="text-decoration: underline;">4</span>       0.106 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      3 TRUE         57 0.005<span style="text-decoration: underline;">91</span>      0.097<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      4 FALSE       123 0.021<span style="text-decoration: underline;">2</span>       0.145 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      4 TRUE         45 0.005<span style="text-decoration: underline;">15</span>      0.086<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      5 FALSE        97 0.019<span style="text-decoration: underline;">0</span>       0.128 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      5 TRUE         67 0.008<span style="text-decoration: underline;">58</span>      0.106 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 20 more rows</span></span></span></code></pre></div>
<p>If expected values are passed to <code><a href="../reference/exp_stats.html">exp_stats()</a></code> and
<code>credibility</code> is set to <code>TRUE</code>, then the output
will also contain credibility-weighted expected values:</p>
<p><span class="math display">\[
q^{adj} = Z^{cred} \times q^{obs} + (1-Z^{cred}) \times q^{exp}
\]</span> where,</p>
<ul>
<li>
<span class="math inline">\(q^{adj}\)</span> = credibility-weighted
estimate</li>
<li>
<span class="math inline">\(Z^{cred}\)</span> = partial credibility
factor</li>
<li>
<span class="math inline">\(q^{obs}\)</span> = observed termination
rate</li>
<li>
<span class="math inline">\(q^{exp}\)</span> = expected termination
rate</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exposed_data2</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">pol_yr</span>, <span class="va">inc_guar</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/exp_stats.html">exp_stats</a></span><span class="op">(</span>credibility <span class="op">=</span> <span class="cn">TRUE</span>, expected <span class="op">=</span> <span class="st">"expected_1"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">pol_yr</span>, <span class="va">inc_guar</span>, <span class="va">claims</span>, <span class="va">q_obs</span>, <span class="va">credibility</span>, <span class="va">adj_expected_1</span>, </span>
<span>         <span class="va">expected_1</span>, <span class="va">ae_expected_1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups: pol_yr, inc_guar </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt;  Expected values: expected_1 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 30 × 8</span></span></span>
<span><span class="co">#&gt;    pol_yr inc_guar claims   q_obs credibility adj_expected_1 expected_1</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      1 FALSE        56 0.007<span style="text-decoration: underline;">25</span>       0.192        0.005<span style="text-decoration: underline;">43</span>    0.005  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      1 TRUE         46 0.003<span style="text-decoration: underline;">99</span>       0.173        0.004<span style="text-decoration: underline;">82</span>    0.005  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      2 FALSE        92 0.013<span style="text-decoration: underline;">0</span>        0.246        0.009<span style="text-decoration: underline;">05</span>    0.007<span style="text-decoration: underline;">78</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      2 TRUE         68 0.006<span style="text-decoration: underline;">41</span>       0.211        0.007<span style="text-decoration: underline;">49</span>    0.007<span style="text-decoration: underline;">78</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      3 FALSE        67 0.010<span style="text-decoration: underline;">4</span>        0.210        0.010<span style="text-decoration: underline;">5</span>     0.010<span style="text-decoration: underline;">6</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      3 TRUE         57 0.005<span style="text-decoration: underline;">91</span>       0.193        0.009<span style="text-decoration: underline;">66</span>    0.010<span style="text-decoration: underline;">6</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      4 FALSE       123 0.021<span style="text-decoration: underline;">2</span>        0.286        0.015<span style="text-decoration: underline;">6</span>     0.013<span style="text-decoration: underline;">3</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      4 TRUE         45 0.005<span style="text-decoration: underline;">15</span>       0.172        0.011<span style="text-decoration: underline;">9</span>     0.013<span style="text-decoration: underline;">3</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      5 FALSE        97 0.019<span style="text-decoration: underline;">0</span>        0.254        0.016<span style="text-decoration: underline;">8</span>     0.016<span style="text-decoration: underline;">1</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      5 TRUE         67 0.008<span style="text-decoration: underline;">58</span>       0.210        0.014<span style="text-decoration: underline;">5</span>     0.016<span style="text-decoration: underline;">1</span> </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 20 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: ae_expected_1 &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="miscellaneous">Miscellaneous<a class="anchor" aria-label="anchor" href="#miscellaneous"></a>
</h2>
<div class="section level3">
<h3 id="summary-method">Summary method<a class="anchor" aria-label="anchor" href="#summary-method"></a>
</h3>
<p>As noted above, the result of <code><a href="../reference/exp_stats.html">exp_stats()</a></code> is an
<code>exp_df</code> object. If the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> function is
applied to an <code>exp_df</code> object, the data will be summarized
again and return a higher level <code>exp_df</code> object.</p>
<p>If no additional arguments are passed, <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> returns
a single row of aggregate results.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">exp_res</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups:  </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt;  Expected values: expected_1, expected_2 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 8</span></span></span>
<span><span class="co">#&gt;   n_claims claims exposure  q_obs expected_1 expected_2 ae_expected_1</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     <span style="text-decoration: underline;">2</span>869   <span style="text-decoration: underline;">2</span>869  <span style="text-decoration: underline;">132</span>634. 0.021<span style="text-decoration: underline;">6</span>     0.024<span style="text-decoration: underline;">2</span>     0.020<span style="text-decoration: underline;">9</span>         0.892</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: ae_expected_2 &lt;dbl&gt;</span></span></span></code></pre></div>
<p>If additional variable names are passed to the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>
function, then the output will group the data by those variables. In our
example, if <code>pol_yr</code> is passed to <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>, the
output will contain one row per policy year.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">exp_res</span>, <span class="va">pol_yr</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups: pol_yr </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt;  Expected values: expected_1, expected_2 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 9</span></span></span>
<span><span class="co">#&gt;    pol_yr n_claims claims exposure   q_obs expected_1 expected_2 ae_expected_1</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      1      102    102   <span style="text-decoration: underline;">19</span>252. 0.005<span style="text-decoration: underline;">30</span>    0.005       0.021<span style="text-decoration: underline;">0</span>         1.06 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      2      160    160   <span style="text-decoration: underline;">17</span>715. 0.009<span style="text-decoration: underline;">03</span>    0.007<span style="text-decoration: underline;">78</span>     0.021<span style="text-decoration: underline;">0</span>         1.16 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      3      124    124   <span style="text-decoration: underline;">16</span>097. 0.007<span style="text-decoration: underline;">70</span>    0.010<span style="text-decoration: underline;">6</span>      0.021<span style="text-decoration: underline;">0</span>         0.730</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      4      168    168   <span style="text-decoration: underline;">14</span>536. 0.011<span style="text-decoration: underline;">6</span>     0.013<span style="text-decoration: underline;">3</span>      0.021<span style="text-decoration: underline;">0</span>         0.867</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      5      164    164   <span style="text-decoration: underline;">12</span>916. 0.012<span style="text-decoration: underline;">7</span>     0.016<span style="text-decoration: underline;">1</span>      0.020<span style="text-decoration: underline;">9</span>         0.788</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      6      152    152   <span style="text-decoration: underline;">11</span>376. 0.013<span style="text-decoration: underline;">4</span>     0.018<span style="text-decoration: underline;">9</span>      0.020<span style="text-decoration: underline;">9</span>         0.707</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      7      164    164    <span style="text-decoration: underline;">9</span>917. 0.016<span style="text-decoration: underline;">5</span>     0.021<span style="text-decoration: underline;">7</span>      0.020<span style="text-decoration: underline;">9</span>         0.763</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      8      190    190    <span style="text-decoration: underline;">8</span>448. 0.022<span style="text-decoration: underline;">5</span>     0.024<span style="text-decoration: underline;">4</span>      0.020<span style="text-decoration: underline;">8</span>         0.920</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      9      181    181    <span style="text-decoration: underline;">6</span>960. 0.026<span style="text-decoration: underline;">0</span>     0.027<span style="text-decoration: underline;">2</span>      0.020<span style="text-decoration: underline;">8</span>         0.955</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     10      152    152    <span style="text-decoration: underline;">5</span>604. 0.027<span style="text-decoration: underline;">1</span>     0.03        0.020<span style="text-decoration: underline;">8</span>         0.904</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>     11      804    804    <span style="text-decoration: underline;">4</span>390. 0.183      0.2         0.020<span style="text-decoration: underline;">8</span>         0.916</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>     12      330    330    <span style="text-decoration: underline;">2</span>663. 0.124      0.15        0.020<span style="text-decoration: underline;">0</span>         0.826</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>     13       99     99    <span style="text-decoration: underline;">1</span>620. 0.061<span style="text-decoration: underline;">1</span>     0.05        0.019<span style="text-decoration: underline;">7</span>         1.22 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span>     14       62     62     872. 0.071<span style="text-decoration: underline;">1</span>     0.05        0.019<span style="text-decoration: underline;">5</span>         1.42 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span>     15       17     17     268. 0.063<span style="text-decoration: underline;">4</span>     0.05        0.019<span style="text-decoration: underline;">1</span>         1.27 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: ae_expected_2 &lt;dbl&gt;</span></span></span></code></pre></div>
<p>Similarly, if <code>inc_guar</code> is passed to
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>, the output will contain a row for each unique
value in <code>inc_guar</code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">exp_res</span>, <span class="va">inc_guar</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups: inc_guar </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt;  Expected values: expected_1, expected_2 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 9</span></span></span>
<span><span class="co">#&gt;   inc_guar n_claims claims exposure  q_obs expected_1 expected_2 ae_expected_1</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FALSE        <span style="text-decoration: underline;">1</span>601   <span style="text-decoration: underline;">1</span>601   <span style="text-decoration: underline;">52</span>123. 0.030<span style="text-decoration: underline;">7</span>     0.023<span style="text-decoration: underline;">5</span>      0.03          1.31 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> TRUE         <span style="text-decoration: underline;">1</span>268   <span style="text-decoration: underline;">1</span>268   <span style="text-decoration: underline;">80</span>511. 0.015<span style="text-decoration: underline;">7</span>     0.024<span style="text-decoration: underline;">7</span>      0.015         0.637</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: ae_expected_2 &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="column-names">Column names<a class="anchor" aria-label="anchor" href="#column-names"></a>
</h3>
<p>As a default, <code><a href="../reference/exp_stats.html">exp_stats()</a></code> assumes the input data frame
uses the following naming conventions:</p>
<ul>
<li>The exposure column is called <code>exposure</code>
</li>
<li>The status column is called <code>status</code>
</li>
</ul>
<p>These default names can be overridden using the
<code>col_exposure</code> and <code>col_status</code> arguments.</p>
<p>For example, if the status column was called <code>curr_stat</code>
in our data, we could write:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exposed_data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/exp_stats.html">exp_stats</a></span><span class="op">(</span>col_status <span class="op">=</span> <span class="st">"curr_stat"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="applying-exp_stats-to-a-non-exposed_df-data-frame">Applying exp_stats to a non-<code>exposed_df</code> data frame<a class="anchor" aria-label="anchor" href="#applying-exp_stats-to-a-non-exposed_df-data-frame"></a>
</h3>
<p><code><a href="../reference/exp_stats.html">exp_stats()</a></code> can still work when given a
non-<code>exposed_df</code> data frame. However, it will be unable to
infer certain attributes like the target status and the study dates. For
target status, all statuses except the first level are assumed to be
terminations. Since this may not be desirable, a warning message will
appear informing what statuses were assumed to be terminated.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">not_exposed_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">exposed_data</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/exp_stats.html">exp_stats</a></span><span class="op">(</span><span class="va">not_exposed_df</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: <span style="color: #BB0000;">✖</span> No target status was provided.</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">ℹ</span> Death, Surrender was assumed.</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups:  </span></span>
<span><span class="co">#&gt;  Target status: Death, Surrender </span></span>
<span><span class="co">#&gt;  Study range:  to  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   n_claims claims exposure  q_obs</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     <span style="text-decoration: underline;">4</span>639   <span style="text-decoration: underline;">4</span>639  <span style="text-decoration: underline;">132</span>634. 0.035<span style="text-decoration: underline;">0</span></span></span></code></pre></div>
<p>If <code>target_status</code> is provided, no warning message will
appear.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/exp_stats.html">exp_stats</a></span><span class="op">(</span><span class="va">not_exposed_df</span>, target_status <span class="op">=</span> <span class="st">"Surrender"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups:  </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range:  to  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   n_claims claims exposure  q_obs</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     <span style="text-decoration: underline;">2</span>869   <span style="text-decoration: underline;">2</span>869  <span style="text-decoration: underline;">132</span>634. 0.021<span style="text-decoration: underline;">6</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="limitations">Limitations<a class="anchor" aria-label="anchor" href="#limitations"></a>
</h3>
<p>The <code><a href="../reference/exp_stats.html">exp_stats()</a></code> function only supports termination
studies. It does not contain support for transaction studies or studies
with multiple changes from an active to an inactive status. For
information on transaction studies, see
<code><a href="../articles/transactions.html">vignette("transactions")</a></code>.</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Matt Heaphy.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7. Logo <a href="https://www.freepik.com/free-vector/shine-old-wooden-chest-realistic-composition-transparent-background-with-vintage-coffer-sparkling-particles_7497397.htm#query=treasure&amp;position=7&amp;from_view=search&amp;track=sph" class="external-link">image by macrovector</a> on Freepik</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
